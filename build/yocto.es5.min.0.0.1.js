Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!=typeof o&&"function"!=typeof o||null===o)throw new TypeError("Object.keys called on non-object");var u=[];for(var i in o)t.call(o,i)&&u.push(i);if(e)for(var c=0;r>c;c++)t.call(o,n[c])&&u.push(n[c]);return u}}()),Array.prototype.every||(Array.prototype.every=function(t){"use strict";if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var r=arguments[1],o=0;n>o;o++)if(o in e&&!t.call(r,e[o],o,e))return!1;return!0}),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var r=[],o=arguments[1],u=0;n>u;u++)if(u in e){var i=e[u];t.call(o,i,u,e)&&r.push(i)}return r}),function(t){"use strict";function e(t){function e(){var t="__ytest";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}}function n(t){t.template={},t.doHashLookup=!1,t.object=void 0,t.index=0,t.match=!1,t.onEach=void 0,t.result=[],t.onEnd=void 0}function r(){var t=arguments;return function(){var e=0,n=t.length,r=arguments;for(e=0;n>e;e+=1)r=[t[e].apply(this,r)];return r[0]}}function o(t){return t.match=Object.keys(t.template).every(function(e){return j.fn(t.template[e])?t.template[e].call(this,t.object[e],j):t.object[e]===t.template[e]}),t}function u(t){return t.match&&(t.object=t.objects.splice(t.index,1)[0],t.index--),t}function i(t){var e=t.template[d.uuid];return delete t.uuids[e],t}function c(t,e,n){return t.uuid&&(n.uuids[e[t.uuid]]=e),n}function s(t){return t.match&&t.onEach.call(null,t.object),t}function a(t,e){var n=r.apply(null,e),o=0!==t.result.length||!1,u=o?t.result:t.objects,i=[],c=u.length;for(t.index=0;c>t.index;t.index+=1)t.object=u[t.index],n(t),t.match&&(o||c==u.length||(c=u.length),i.push(t.object));return t.result=i,t.onEnd&&t.onEnd.call(null,t.result),t}function l(t,e){var n=r.apply(null,e),o=t.template[d.uuid];return t.object=t.uuids[o]?t.uuids[o]:{},n(t),t.match&&t.result.push(t.object),t.onEnd&&t.onEnd.call(null,t.result),t}function f(t,e){return d.uuid&&t.template[d.uuid]&&t.doHashLookup?l(t,e):a(t,e)}function p(t){return t&&"session"===t.type?"sessionStorage":"localStorage"}function h(t,e,n){t.timestamp&&!e[t.timestamp]&&(e[t.timestamp]=n.updated)}var d={name:"yocto"},m=[],y={objects:[],uuids:{},updated:-1,template:{},doHashLookup:!1,object:void 0,index:0,match:!1,onEach:void 0,result:[],onEnd:void 0},b={storage:e()},j={arr:function(t){return t instanceof Array},obj:function(t){return t instanceof Object},fn:function(t){return"function"==typeof t},str:function(t){return"string"==typeof t},num:function(t){return"number"==typeof t},empty:function(t){return null===t?!0:j.arr(t)||j.str(t)?0===t.length:j.obj(t)?0===Object.keys(t).length:!0}};return j.obj(t)&&j.obj(d)&&Object.keys(t).every(function(e){"name"!==e&&(d[e]=t[e])}),{put:function(t,e){var r=0,o=0;if(y.match=!0,y.updated=+new Date,j.arr(t)){if(t=t.filter(function(t){return j.obj(t)&&!j.arr(t)}),d.uuid||d.timestamp)for(o=t.length,r=0;o>r;r+=1)h(d,t[r],y),c(d,t[r],y);y.objects=y.objects.concat(t),y.result=y.result.concat(t)}return j.obj(t)&&!j.arr(t)&&(h(d,t,y),c(d,t,y),y.objects.push(t),y.result.push(t)),e&&j.fn(e)&&(e.call(this,y.result),n(y),m=[]),this},get:function(t,e){return y.template=t||{},y.doHashLookup=!0,m.push(o),y.onEnd=e,e&&j.fn(e)&&(f(y,m),n(y),m=[]),this},take:function(t,e){return y.template=t||{},m.push(o),m.push(u),m.push(i),y.onEnd=e,e&&j.fn(e)&&(f(y,m),n(y),m=[]),this},each:function(t){return m.push(s),y.onEach=t,t&&j.fn(t)&&(f(y,m),n(y),m=[]),this},drop:function(t){return y.objects.splice(0,y.objects.length),y.uuids={},t&&j.fn(t)&&(t.call(null),n(y),m=[]),this},destroy:function(t,e){var n=p(t);return t&&j.str(t.name)&&b.storage&&window[n].removeItem(t.name),this.drop(e),this},sort:function(t,e){return y.onEnd=function(){y.result=y.result.sort(function(e,n){var r="",o="";if(j.obj(e)&&j.obj(n)&&e&&n){if(r=e[t],o=n[t],r===o)return e;if(typeof r==typeof o)return o>r?-1:1}})},f(y,m),e&&j.fn(e)&&(e.call(null,y.result),n(y),m=[]),this},save:function(t,e){var r=p(t);return t&&j.str(t.name)&&b.storage&&(y.onEnd=function(){window[r].setItem(t.name,JSON.stringify({creator:t.name,timestamp:+new Date,objects:y.result})),e&&j.fn(e)&&e.call(null,y.result)},e&&j.fn(e)&&(f(y,m),n(y),m=[])),this},load:function(t,e){var n=p(t),r="",o={};return t&&j.str(t.name)&&b.storage&&(r=window[n].getItem(t.name),o=JSON.parse(r)),this.put(j.empty(o)?[]:o.objects,e),this},status:function(t){return t.call(null,{count:y.objects.length,updated:y.updated}),this}}}t.db=function(t){return new e(t)}}("undefined"==typeof exports?this.yocto={}:exports);
//@ sourceMappingURL=build/yocto.es5.min.0.0.1.js.map