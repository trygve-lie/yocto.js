(function(t){"use strict";function e(){function t(){var t=arguments;return function(){var e=0,n=t.length,r=arguments;for(e=0;n>e;e+=1)r=[t[e].apply(this,r)];return r[0]}}function e(t){return t.match=Object.keys(t.template).every(function(e){return i.fn(t.template[e])?t.template[e].call(this,t.object[e],i):t.object[e]===t.template[e]}),t}function n(t){return t.match&&(t.object=t.objects.splice(t.index,1)[0]),t}function r(t){return t.match&&t.callback.call(null,t.object),t}function o(e,n,r){var o=t.apply(null,n),u=0!==e.result.length||!1,c=u?e.result:e.objects,s=0,a=c.length;for(s=0;a>s;s+=1)e.index=s,e.object=c[s],o(e),e.match&&(u||a==c.length||(a=c.length,s--),e.result.push(e.object));return r&&r.call(null,e.result),e.result=[],e}function u(t){return t&&"session"===t.type?"sessionStorage":"localStorage"}var c=[],s={objects:[],object:void 0,result:[],index:0,template:{},match:!0,callback:void 0},a={storage:function(){var t="__ytest";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}}},i={arr:function(t){return t instanceof Array},obj:function(t){return t instanceof Object},fn:function(t){return"function"==typeof t},str:function(t){return"string"==typeof t},num:function(t){return"number"==typeof t},empty:function(t){return null===t?!0:i.arr(t)||i.str(t)?0===t.length:i.obj(t)?0===Object.keys(t).length:!0}};return{put:function(t,e){return i.arr(t)&&(t=t.filter(function(t){return i.obj(t)&&!i.arr(t)}),s.objects=s.objects.concat(t),s.result=s.result.concat(t)),i.obj(t)&&!i.arr(t)&&(s.objects.push(t),s.result.push(t)),e&&i.fn(e)&&(e.call(this,s.result),s.result=[]),this},get:function(t,n){return s.template=t||{},c.push(e),n&&i.fn(n)&&(o(s,c,n),c=[]),this},take:function(t,r){return s.template=t||{},c.push(e),c.push(n),r&&i.fn(r)&&(o(s,c,r),c=[]),this},each:function(t){return c.push(r),t&&i.fn(t)&&(s.callback=t,o(s,c)),c=[],this},drop:function(t){return s.objects.splice(0,s.objects.length),t&&i.fn(t)&&(t.call(null),c=[]),this},destroy:function(t,e){var n=u(t);return t&&i.str(t.name)&&a.storage()&&window[n].removeItem(t.name),this.drop(e),this},sort:function(t,e){var n=this,r=[];return i.str(t)&&(o(s,c,function(o){r=o.sort(function(e,n){var r="",o="";if(i.obj(e)&&i.obj(n)&&e&&n){if(r=e[t],o=n[t],r===o)return e;if(typeof r==typeof o)return o>r?-1:1}}),e&&i.fn(e)&&(e.call(n,r),r=[])}),s.result=r),this},save:function(t,e){var n=this,r=u(t);return t&&i.str(t.name)&&a.storage()&&o(s,c,function(o){window[r].setItem(t.name,JSON.stringify({creator:t.name,timestamp:+new Date,objects:o})),e&&i.fn(e)&&(e.call(n,o),n.chain=[])}),this},load:function(t,e){var n=u(t),r="",o={};return t&&i.str(t.name)&&a.storage()&&(r=window[n].getItem(t.name),o=JSON.parse(r),o.creator===t.name&&(s.objects=s.objects.concat(o.objects),s.result=s.result.concat(o.objects))),e&&i.fn(e)&&(e.call(this,s.result),s.result=[],c=[]),this},observe:function(){},unobserve:function(){}}}t.db=function(){return new e}})("undefined"==typeof exports?this.yocto={}:exports);
//@ sourceMappingURL=build/yocto.min.0.0.1.js.map