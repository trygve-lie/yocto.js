(function(t){"use strict";function e(){var t=arguments;return function(){var e=0,n=t.length,r=arguments;for(e=0;n>e;e+=1)r=[t[e].apply(this,r)];return r[0]}}function n(t){return t.match=Object.keys(t.template).every(function(e){return i.fn(t.template[e])?t.template[e].call(this,t.object[e],i):t.object[e]===t.template[e]}),t}function r(t){return t.match&&(t.object=t.objects.splice(t.index,1)[0]),t}function o(t){return t.match&&t.callback.call(null,t.object),t}function u(t,n,r){var o=e.apply(null,n),u=0!==t.result.length||!1,c=u?t.result:t.objects,s=0,a=c.length;for(s=0;a>s;s+=1)t.index=s,t.object=c[s],o(t),t.match&&(u||a==c.length||(a=c.length,s--),t.result.push(t.object));return r&&r.call(null,t.result),t.result=[],t}function c(t){return t&&"session"===t.type?"sessionStorage":"localStorage"}function s(){var t=[],e={objects:[],object:void 0,result:[],index:0,template:{},match:!0,callback:void 0};return{put:function(t,n){return i.arr(t)&&(t=t.filter(function(t){return i.obj(t)&&!i.arr(t)}),e.objects=e.objects.concat(t),e.result=e.result.concat(t)),i.obj(t)&&!i.arr(t)&&(e.objects.push(t),e.result.push(t)),n&&i.fn(n)&&(n.call(this,e.result),e.result=[]),this},get:function(r,o){return e.template=r||{},t.push(n),o&&i.fn(o)&&(u(e,t,o),t=[]),this},take:function(o,c){return e.template=o||{},t.push(n),t.push(r),c&&i.fn(c)&&(u(e,t,c),t=[]),this},each:function(n){return t.push(o),n&&i.fn(n)&&(e.callback=n,u(e,t)),t=[],this},drop:function(n){return e.objects.splice(0,e.objects.length),n&&i.fn(n)&&(n.call(null),t=[]),this},destroy:function(t,e){var n=c(t);return t&&i.str(t.name)&&a.storage()&&window[n].removeItem(t.name),this.drop(e),this},sort:function(n,r){var o=this,c=[];return i.str(n)&&(u(e,t,function(t){c=t.sort(function(t,e){var r="",o="";if(i.obj(t)&&i.obj(e)&&t&&e){if(r=t[n],o=e[n],r===o)return t;if(typeof r==typeof o)return o>r?-1:1}}),r&&i.fn(r)&&(r.call(o,c),c=[])}),e.result=c),this},save:function(n,r){var o=this,s=c(n);return n&&i.str(n.name)&&a.storage()&&u(e,t,function(t){window[s].setItem(n.name,JSON.stringify({creator:n.name,timestamp:+new Date,objects:t})),r&&i.fn(r)&&(r.call(o,t),o.chain=[])}),this},load:function(n,r){var o=c(n),u="",s={};return n&&i.str(n.name)&&a.storage()&&(u=window[o].getItem(n.name),s=JSON.parse(u),s.creator===n.name&&(e.objects=e.objects.concat(s.objects),e.result=e.result.concat(s.objects))),r&&i.fn(r)&&(r.call(this,e.result),e.result=[],t=[]),this},observe:function(){},unobserve:function(){}}}var a={storage:function(){var t="__ytest";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}}},i={arr:function(t){return t instanceof Array},obj:function(t){return t instanceof Object},fn:function(t){return"function"==typeof t},str:function(t){return"string"==typeof t},num:function(t){return"number"==typeof t},empty:function(t){return null===t?!0:i.arr(t)||i.str(t)?0===t.length:i.obj(t)?0===Object.keys(t).length:!0}};t.db=function(){return new s}})("undefined"==typeof exports?this.yocto={}:exports);
//@ sourceMappingURL=build/yocto.min.0.0.1.js.map